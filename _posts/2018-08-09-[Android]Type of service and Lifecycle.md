---
layout: post
category: Android
title: "[안드로이드]서비스의 종류와 생명주기"
---

# 서비스의 2가지 종류

## 시작된 상태

* `startService()`를 호출하여 시작한다.
* 무기한 실행될 수 있으며 이 서비스를 시작한 컴포넌트가 소멸되도 상관없다.
* 예를 들어, 다운로드 작업이 있고 완료되면 알아서 끝난다.

## 바인드된 상태

* `bindService()`를 호출하여 바인드한다.
* 클라이언트-서버와 같이 상호작용이 가능하며 여러 프로세스에 걸친 IPC로 수행할 수 있다.
* 다른 컴포넌트가 바인드된 경우에만 실행된다.
* 여러개의 컴포넌트가 바인드될 수 있지만, 바인딩이 전부 해제되면 소멸된다.

참고로 콜백 메소드 2가지 모두 구현하면 둘 다 실행할 수 있다.

<br>

# 서비스 vs 쓰레드

둘 다 비슷한 걸 구현해주는 것 같은데 어떤 것을 사용해야 할까? 이럴 땐 레퍼런스를 봐야 한다. 고맙게도 한국어로 나와있다.

> 서비스는 그저 백그라운드에서 실행될 수 있는 구성 요소일 뿐입니다. 이는 사용자가 애플리케이션과 상호작용하지 않아도 관계 없이 해당됩니다. 따라서, 서비스를 생성하는 것은 꼭 그것이 필요할 때만으로 국한되어야 합니다. 

결론적으로, 쓰레드는 사용자가 앱을 실행하면서 작업을 해야 할 때이고 서비스는 사용자가 앱을 종료해도 그 컴포넌트가 실행한 백그라운드 작업이 종료되지 않기 때문에 그런 경우에 사용할 수 있다는 얘기이다.

<br>

# 서비스의 생명주기(Life Cycle)

<img src="https://developer.android.com/images/service_lifecycle.png?hl=ko">

잠시만 차분히 위 그림을 살펴보면서 흐름을 익히자. 언제 생성되서 작업을 하고 언제 소멸되는지 눈으로 따라가다보면 익숙해질 것이다.

* `onCreate()` : 서비스가 만들어진다.
* `onStartCommand()` : `startService()`로 서비스가 실행된다.
* `onBind()` : `bindService()`로 클라이언트가 서비스에 바인딩된다.
* `onUnbind()` : `unbindService()`로 클라이언트의 서비스 바인딩이 해제된다.
* `onRebind()` : `onUnbind()`가 호출된 후에 `bindService()`로 다시 바인딩 된다.
* `onDestroy()` : 서비스가 더 이상 사용되지 않고 소멸된다.