---
layout: post
category: Algorithm
title: "[알고리즘]조합 실제로 구하기"
---

[BOJ6603 로또](https://www.acmicpc.net/problem/6603) 문제를 풀면서 브루트 포스로 접근하려고 했으나 처음에 어떻게 접근해야 하는지 감이 안왔다. 경우의 수라면 조합을 사용하는 것이었으나 그 조합을 이용해서 실제 숫자들을 구하는 방법을 몰랐기 때문에 정리하려고 한다.

# 조합 경우의 수

먼저 조합 경우의 수를 구하는 코드는 재귀함수로 굉장히 간단하다. 하지만 여기서 실제 숫자들을 출력하기 위해선 재귀함수를 쓸 때 그것들이 어떤 의미가 있는지 알아야 한다.

```c++
int Combination(int n, int r)
{
    if(n==r || r==0) return 1;
    return Comb(n-1, r-1) + Comb(n-1, r);
}
```

위와 같이 단순 공식을 이용해 표현할 수 있지만 이제까지 어떤 의미를 가지고 있는지 알지 못했기 때문에 이런 변형문제에 대처할 수 없었다. 실제 조합을 재귀로 해결할 때의 식이 갖는 의미는 **현재 위치의 숫자를 선택하는 경우와 선택하지 않는 경우를 말한다.** 

n개 중에서 r개를 선택하는 경우의 수를 구하는 것인데, 현재 위치(지정해주어야 함)의 숫자를 선택할 경우 n과 r이 모두 줄어들어서 n-1개 중에서 r-1개를 선택하는 경우의 수로 변하게 되는 것이다. 하지만 현재 위치의 숫자를 선택하지 않는 경우라면 r은 줄어들지만 n은 줄어들지 않기 때문에 n-1개 중에서 r래를 선택하는 경우라고 할 수 있다. 따라서 아래 식이 나오는 것이다.
$$
_nC_r = _{n-1}C_{r-1}+_{n-1}C_r
$$

# 조합 출력

이제 실제 조합을 출력해보도록 하자. 위 식을 통해서 n과 r은 계속 줄어듦을 알 수가 있고 **결국 r=0이라는 말은 더 이상 선택할 수가 없다는 것, 즉 선택을 다 했다는 말과 동일**하기 때문에 그 때 선택한 숫자들을 출력해주면 된다. **주의할 점은 n<r인 경우가 있다는 점이다.** $_{n-1}C_r$ 에서 n이 계속 줄어들 수 있기 때문에 이 경우가 존재하고 더 작은 숫자에서 더 큰 숫자를 선택하는 경우는 말이 안되기 때문에 예외 처리를 해주어야 한다. 

그런데 출력은 어떻게 할 수 있을까? 출력을 위해선 2가지 변수인 index와 target을 사용해야 한다. 우리는 이미 가지고 있는 배열이 있고 그 배열에 조합을 적용하는 것이므로 그걸 출력해주어야 한다. **하지만 어디서부터 어디까지 출력해야 하는지를 알아야 하기 때문에 데이터가 담긴 배열의 인덱스를 저장할 배열이 필요하다!** 그 배열을 c라고 하면 **c의 인덱스가 index**를 의미하며 **target**이 의미하는 것은 데이터가 담긴 배열인 **data 배열의 인덱스**이다.

위 설명을 기준으로 코드를 짜보면 아래와 같다.

```java
public static void Comb(int n, int r, int index, int target)
{
	if(r==0) {
		for(int i=0; i<index; i++)
			System.out.print(data[c[i]] + " ");
		System.out.println();
		return;
	}
	if(n<r) return;
		
	c[index] = target;
	Comb(n-1, r-1, index+1,target+1);
	Comb(n-1, r, index,target+1);
}

// main 함수
Comb(7, 6, 0, 0); // 7개 중에서 6개를 선택한다.
```

주목할 점은 선택하는 경우는 index를 증가시키지만 선택하지 않는 경우는 index를 증가시키지 않는다는 점인데 그 이유는 당연한 것이, 선택할 경우엔 다음 인덱스의 값을 채워야 하므로 증가시키고 선택하지 않는 경우는 아직 채우지 못했으므로 증가시키지 않는 것이다.

그러면 target은 왜 항상 증가시킬까? target은 선택할지 말지 검사하는 대상이므로 선택 여부에 상관 없이 r이 0이 될 때까지 모든 숫자를 봐야 하므로 어떤 경우에든 증가시켜주는 것이다.



## 설명참조

* [Limky님](http://limkydev.tistory.com/156)